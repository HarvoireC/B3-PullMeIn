<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PullMeIn - Article</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container nav">
      <div class="brand">
        <h1 class="logo"><a href="articles.html">PullMeIn</a></h1>
      </div>
      <nav class="nav-menu">
        <a href="articles.html">Articles</a>
        <a href="submit.html">Proposer un article</a>
        <a href="about.html">À propos</a>
      </nav>
      <div class="user-chip" id="navUser">Invité</div>
    </div>
  </header>

  <main class="container">
    <article class="article" id="articleContainer" aria-live="polite"></article>
  </main>

  <script src="scripts/app.js"></script>
  <script src="scripts/articlesData.js"></script>
  <script>
    (function(){
      updateNavbarUser();
      const id = Number(getQueryParam('id'));
      const container = document.getElementById('articleContainer');
      const a = Array.isArray(articles) ? articles.find(x => Number(x.id) === id) : null;
      if(!a){
        container.innerHTML = '<p class="muted">Article introuvable. <a href="articles.html">Retour aux articles</a></p>';
        return;
      }
      container.innerHTML = `
        <header>
          <div class="meta">Par ${a.author} — ${a.date}</div>
          <h1>${a.title}</h1>
        </header>
        ${a.thumbnail ? `<div class="cover"><img src="${a.thumbnail}" alt="Image de couverture" style="width:100%;height:auto;display:block"></div>` : ''}
        <section class="content">${a.content || ''}</section>
        <section class="sources">
          <h3>Sources</h3>
          ${Array.isArray(a.sources) && a.sources.length ? `
            <ul>
              ${a.sources.map(s => `<li><a target="_blank" rel="noopener" href="${s.url}">${s.label}</a></li>`).join('')}
            </ul>` : '<p class="muted">Aucune source fournie.</p>'}
        </section>
        <div class="spacer"></div>
        <p><a class="btn secondary" href="articles.html">← Retour aux articles</a></p>
      `;
    })();
  </script>
</body>
</html>
